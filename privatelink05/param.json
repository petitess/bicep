{ 
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "param":{
            "value": {
                "location": "SwedenCentral",
				"locationAlt": "WestEurope",
				"tags": {
					"Application": "log",
					"Environment": "hub"
                    },
                    "log": {
                        "sku": "perGB2018",
                        "retention": 30,
                        "solutions": [
                            "VMInsights",
                            "Updates",
                            "Security",
                            "ServiceMap",
                            "ChangeTracking"
                        ],
                        "events": [
                            "System",
                            "Application"
                        ]
                    },
                    "pdnsz":[
                        "privatelink.monitor.azure.com",
                        "privatelink.ods.opinsights.azure.com",
                        "privatelink.oms.opinsights.azure.com",
                        "privatelink.agentsvc.azure-automation.net",
                        "privatelink.blob.core.windows.net"
                    ],
                    "webtests":[
                        {
                            "name":"google.com",
                            "url": "https://google.com"
                        },
                        {
                            "name":"app-gtm-dev-02.azurewebsites.net",
                            "url": "https://app-gtm-dev-02.azurewebsites.net/healthz"
                        },
                        {
                            "name":"primapraktiken-webtidbook.test.com",
                            "url": "https://primapraktiken-webtidbook.test.com"
                        }
                    ],
                    "vnet": {
                        "addressPrefixes": [
                            "10.100.1.0/24"
                        ],
                        "subnets": [
                            {
                                "name": "AzureFirewallSubnet",
                                "addressPrefix": "10.100.1.0/26"
                            },
                            {
                                "name": "AzureBastionSubnet",
                                "addressPrefix": "10.100.1.64/26",
                                "rules": [
                                    {
                                        "name": "nsgsr-allow-gatewaymanager-inbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "GatewayManager",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "*",
                                            "destinationPortRange": "443",
                                            "protocol": "Tcp",
                                            "priority": 100,
                                            "direction": "Inbound"
                                        }
                                    },
                                    {
                                        "name": "nsgsr-allow-azureloadbalancer-inbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "AzureLoadBalancer",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "*",
                                            "destinationPortRange": "443",
                                            "protocol": "Tcp",
                                            "priority": 200,
                                            "direction": "Inbound"
                                        }
                                    },
                                    {
                                        "name": "nsgsr-allow-https-inbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "Internet",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "*",
                                            "destinationPortRange": "443",
                                            "protocol": "Tcp",
                                            "priority": 300,
                                            "direction": "Inbound"
                                        }
                                    },
                                    {
                                        "name": "nsgsr-allow-http-outbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "*",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "Internet",
                                            "destinationPortRange": "80",
                                            "protocol": "Tcp",
                                            "priority": 100,
                                            "direction": "Outbound"
                                        }
                                    },
                                    {
                                        "name": "nsgsr-allow-https-outbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "*",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "AzureCloud",
                                            "destinationPortRange": "443",
                                            "protocol": "Tcp",
                                            "priority": 200,
                                            "direction": "Outbound"
                                        }
                                    },
                                    {
                                        "name": "nsgsr-allow-rdp-ssh-outbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "*",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "VirtualNetwork",
                                            "destinationPortRanges": [
                                                "22",
                                                "3389"
                                            ],
                                            "protocol": "Tcp",
                                            "priority": 300,
                                            "direction": "Outbound"
                                        }
                                    }
                                ]
                            },
                            {
                                "name": "GatewaySubnet",
                                "addressPrefix": "10.100.1.128/27"
                            },
                            {
                                "name": "snet-pep",
                                "addressPrefix": "10.100.1.160/27"
                            },
                            {
                                "name": "snet-mgmt",
                                "addressPrefix": "10.100.1.192/27",
                                "rules": [
                                    {
                                        "name": "nsgsr-allow-rdp-inbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "*",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "*",
                                            "destinationPortRange": "3389",
                                            "protocol": "Tcp",
                                            "priority": 100,
                                            "direction": "Inbound"
                                        }
                                    },
                                    {
                                        "name": "nsgsr-allow-internet-outbound",
                                        "properties": {
                                            "access": "Allow",
                                            "sourceAddressPrefix": "*",
                                            "sourcePortRange": "*",
                                            "destinationAddressPrefix": "*",
                                            "destinationPortRange": "*",
                                            "protocol": "*",
                                            "priority": 4094,
                                            "direction": "Outbound"
                                        }
                                    }
                                ]
                            },
                            {
                                "name": "snet-web",
                                "addressPrefix": "10.100.1.224/27"
                            }
                        ]
                    }
}}}}